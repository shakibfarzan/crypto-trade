{% extends "base_bootstrap.html" %}
{% block content %}
<h1>Watch list</h1>
<p>
  {% if user.is_authenticated %}
  <a href="{% url 'logout' %}?next={% url 'app:watchlist' %}">Logout</a>
  <form>
    <input type="text" placeholder="Search.." name="search"
    {% if search %} value="{{ search }}" {% endif %}
    >
    <label for="page">Page:</label>
    <input type="number" id="page" name="page" min="1" max="{{ num_of_pages }}"
    {% if page %} value="{{page}}" {% endif %}>
  
    <label for="page_size">Page size:</label>
    <input type="number" id="page_size" name="page_size" min="100" max="5000"
    {% if page_size %} value="{{page_size}}" {% endif %}>
  
    <button type="submit">Apply</button>
    <a href="{% url 'app:watchlist' %}"><i class="fa fa-undo"></i></a>

    <div style="margin-top: 1rem;">
      <label for="vol_change_min">Volume 24h change min:</label>
      <input type="number" id="vol_change_min" name="vol_change_min"
      {% if vol_change_min %} value="{{vol_change_min}}" {% endif %}>
    </div>

    <div style="margin-top: 1rem;">
      <label for="dom_min">Market cap dominance min:</label>
      <input type="number" step="0.01" id="dom_min" name="dom_min"
      {% if dom_min %} value="{{ dom_min }}" {% endif %}>
    </div>

    <div style="margin-top: 1rem;">
      <label for="vol_per_mcap_min">Volume 24h / Market cap:</label>
      <input type="number" step="0.001" id="vol_per_mcap_min" name="vol_per_mcap_min"
      {% if vol_per_mcap_min %} value="{{vol_per_mcap_min}}" {% endif %}>
    </div>
  </form>
  <p>
  {% if watchlist %}
  <ul>
    {% for item in watchlist %}
      {% for key, value in item.items %}
      <li>
          <p>{{ key }}: <strong>{{ value }}</strong></p>
      </li>
      {% endfor %}
      <hr></hr>
    {% endfor %}
  </ul>
  {% else %}
    <p>No data!</p>
  {% endif %}
  </p>
  {% else %}
  <a href="{% url 'login' %}?next={% url 'app:watchlist' %}">Login</a>
  {% endif %}
  </p>
{% endblock %}
